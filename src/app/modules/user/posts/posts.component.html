<div>
  <br />
  <app-navbar-user></app-navbar-user>
  <br />
</div>

<div *ngIf="(user$|async) as user; else loading">
  <div>
    <table mat-table [dataSource]="user.posts" class="mat-elevation-z8">
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef>Title</th>
        <td mat-cell *matCellDef="let post" [routerLink]="['../all-posts/',post.postId]">{{post.title}}</td>
      </ng-container>

      <ng-container matColumnDef="comments">
        <th mat-header-cell *matHeaderCellDef>Nr. of comments</th>
        <td mat-cell *matCellDef="let post" [routerLink]="['../all-posts/',post.postId]">{{post.comments.length}}</td>
      </ng-container>

      <ng-container matColumnDef="datePosted">
        <th mat-header-cell *matHeaderCellDef>Date posted</th>
        <td mat-cell *matCellDef="let post" [routerLink]="['../all-posts/',post.postId]">
          {{post.datePosted|date:'hh:mm dd/MM/yyyy'}}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="['title','comments','datePosted']"></tr>
      <tr mat-row *matRowDef="let rowData; columns:['title','comments','datePosted']"></tr>
    </table>
  </div>
</div>

<ng-template #loading>
  <mat-spinner class="loading"></mat-spinner>
</ng-template>
